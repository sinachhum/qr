<!DOCTYPE html>
<html>
<head>
     <meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://checkout-uat.payway.com.kh/plugins/checkout2-0.js"></script>
<script>

const req ={
   merchantName: 'Bookmefly',
   useExitApp: false,
   barTitle: {
    title: 'Bookmefly',
    bgColor: '#ff5313',
    color: '#ffffff',
    safeAreaColor: '#ffffff'
   }
  }

        const profile = {
            callback: function(res){
    console.log(res)
   }
        }
    
        var interval = setInterval(function(){
        try{
        AbaPayway.miniApp(req);
        AbaPayway.miniAppGetProfile(profile);

               // using the RegisterHandler
   const registerHandlerName = 'closeApp'
   AbaPayway.miniAppRegisterHandler(registerHandlerName).then((res)=>{
                document.getElementById("momo").innerText('Closed!!!')

     console.log(res, 111)
   });
        clearInterval(interval);
        }catch(e){
        AbaPayway.miniApp(req);
        AbaPayway.miniAppGetProfile(profile);
               // using the RegisterHandler
   const registerHandlerName = 'closeApp'
   AbaPayway.miniAppRegisterHandler(registerHandlerName).then((res)=>{

        document.getElementById("momo").innerText('Closed!!!')
     console.log(res, 111)
   });
        }
        }, 100);


  
</script>
</head>
<body>
     <br/>
     <br/>
     <br/>
 <p id='momo'>Open</p>

</body>
</html>
